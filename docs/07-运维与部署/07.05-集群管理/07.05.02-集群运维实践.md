# 07.05.02 集群运维实践

## 目录

- [07.05.02 集群运维实践](#070502-集群运维实践)
  - [目录](#目录)
  - [1. 概述](#1-概述)
  - [2. 日常运维操作](#2-日常运维操作)
    - [2.1 集群状态检查](#21-集群状态检查)
    - [2.2 节点健康检查](#22-节点健康检查)
  - [3. 配置管理](#3-配置管理)
    - [3.1 配置更新](#31-配置更新)
    - [3.2 配置版本管理](#32-配置版本管理)
  - [4. 数据管理](#4-数据管理)
    - [4.1 数据备份](#41-数据备份)
    - [4.2 数据恢复](#42-数据恢复)
  - [5. 性能监控](#5-性能监控)
    - [5.1 性能指标](#51-性能指标)
    - [5.2 监控工具](#52-监控工具)
  - [6. 扩展阅读](#6-扩展阅读)
  - [7. 权威参考](#7-权威参考)

---

## 1. 概述

集群运维实践涵盖Redis集群的日常运维操作、配置管理、数据管理等核心内容。

---

## 2. 日常运维操作

### 2.1 集群状态检查

```bash
# 检查集群信息
redis-cli -p 7000 CLUSTER INFO

# 检查节点信息
redis-cli -p 7000 CLUSTER NODES

# 检查槽位分配
redis-cli -p 7000 CLUSTER SLOTS
```

### 2.2 节点健康检查

```bash
# 检查节点状态
redis-cli -p 7000 PING

# 检查节点信息
redis-cli -p 7000 INFO server

# 检查内存使用
redis-cli -p 7000 INFO memory
```

---

## 3. 配置管理

### 3.1 配置更新

```bash
# 动态更新配置
redis-cli -p 7000 CONFIG SET maxmemory 4gb

# 查看配置
redis-cli -p 7000 CONFIG GET maxmemory
```

### 3.2 配置版本管理

使用Git管理配置文件，记录每次配置变更。

---

## 4. 数据管理

### 4.1 数据备份

```bash
# RDB备份
redis-cli -p 7000 BGSAVE

# AOF备份
redis-cli -p 7000 BGREWRITEAOF
```

### 4.2 数据恢复

```bash
# 恢复RDB
redis-server --dbfilename dump.rdb

# 恢复AOF
redis-server --appendonly yes
```

---

## 5. 性能监控

### 5.1 性能指标

- QPS：每秒查询数
- 延迟：P50、P95、P99延迟
- 命中率：缓存命中率
- 内存使用：内存使用率

### 5.2 监控工具

使用Prometheus + Grafana进行监控。

---

## 6. 扩展阅读

- [集群部署实践](07.05.01-集群部署实践.md)
- [集群故障处理](07.05.03-集群故障处理.md)
- [Prometheus监控体系](../07.03-监控告警/07.03.01-Prometheus监控体系.md)

---

## 7. 权威参考

- [Redis Cluster官方文档](https://redis.io/docs/manual/scaling/)

---

**文档版本**：v1.0
**最后更新**：2025-01
**文档状态**：✅ 完成
